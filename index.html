<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="author" content="Beth Palmer www.bethpalmer.co.uk">

    <title>Awesome Brighton | Why is Brighton cooler than an Eskimo's sunglasses?</title>
    <!-- <link rel="shortcut icon" href="img/favicon.ico" type="image/x-icon"> -->

    <!-- CSS -->
    <link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="css/main.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Ravi+Prakash|Shadows+Into+Light" rel="stylesheet">

</head>

<body>
    
    <header class="container">
        <div class="row text-center">
            <div class="col-sm-12 col-md-6 col-lg-4">
                <h1>Brighton</h1>
            </div>
            <div class="col-sm-12 col-md-6 col-lg-8">
                <h2>Why is Brighton cooler than an Eskimo's sunglasses?</h2>
            </div>
        </div>
    </header>

    <menu class="container">
        <div class="row">
            <div class="col-sm-4">
                <select data-bind= "options: poiList,
                                    optionsCaption: 'Select a reason of cool...'"></select>
            </div>
            <div class="col-sm-8 text-right">
                <ul class="coolification" data-bind="foreach: poiList">
                    <li data-bind="text: $data, click: $parent.SelectCategory"></li>
                </ul>
            </div>
        </div>
    </menu>

    <section class="container">
        <div class="row">
            <div id="map" class="col-sm-12 col-md-6 col-lg-8">
                <h6>This will be my map section</h6>
            </div>

            <aside class="col-sm-12 col-md-6 col-lg-4">
                <h6>This will be for instagram api
            </aside>
        </div>
    </section>

    <section class="container">
        <div class="row">
            <div class="col-sm-12">
                <h6>This will be for my additional information</h6>
            </div>
        </div>
    </section>

    <footer>
        <div class="row">
            <div class="col-sm-12 text-center">
                <h6>Do you have another reason why Brighton is cooler than an Eskimo's sunglasses? Get in touch: <a href="mailto:bpalmer360@gmail.com">bpalmer360@gmail.com</a></h6>
            </div>
        </div>
    </footer>

    <script>
        var map;
        var markers = [];
        function initMap(){
            // Constructor creates a new map, only need lat/lng and zoom
            map = new google.maps.Map(document.getElementById('map'), {
                center: {lat: 50.827022, lng: -0.158278},
                zoom: 12
            });
           
            var largeInfowindow = new google.maps.InfoWindow();
            var bounds = new google.maps.LatLngBounds();
            
            var locations = [];

            // places.forEach(function(place){
            //     locations.push(place);
            // });

            for (var i=0; i < locations.length; i++){
                var postion = locations[i].location;
                var name = locations[i].name;
                var category = locations[i].category;
                var marker = new google.maps.Marker({
                    map: map,
                    position: postion,
                    title: name,
                    animation: google.maps.Animation.DROP,
                    id: i
                });
                // push the marker to our array of markers
                markers.push(marker);
                // extend the bounds of what is displayed on the map
                bounds.extend(marker.position);
                // create an onclick event to open an info window at each marker
                marker.addListener('click', function(){
                    populateInfoWindow(this, largeInfowindow);
                });
            }
            map.fitBounds(bounds);
            // map.fitBounds(bounds); // won't set map bounds until we showHouses()
            // document.getElementById('show-houses').addEventListener('click', showHouses);
            // document.getElementById('hide-houses').addEventListener('click', hideHouses);
        }
        // This function populates the infowindow when the marker is clicked. Only allows one info window to open, and populates based on markers position.
        function populateInfoWindow(marker, infowindow){
            // check to make sure infowindow is not already open
            if (infowindow.marker != marker) {
                infowindow.marker = marker;
                infowindow.setContent('<div>' + marker.title + '</div>');
                infowindow.open(map, marker);
                // make sure the marker property is cleared if the infowindow is closed
                Infowindow.addListener('closeclick', function(){
                    infowindow.setMarker(null);
                })
            }
        }
        // This function will loop through the markers array and display them all
        // function showHouses(){
        //     var bounds = new google.maps.LatLngBounds();
            // Extend the boundaries of the mapfor each marker and display the marker
        //     for (var i=0; i<markers.length; i++){
        //         markers[i].setMap(map);
        //         bounds.extend(markers[i].position);
        //     }
        //     map.fitBounds(bounds);
        // }
        // function hideHouses(){
        //     for (var i=0; i<markers.length; i++){
        //         markers[i].setMap(null);
        //     }
        // }       

    </script>


    <script async defer
     src="https://maps.googleapis.com/maps/api/js?v=3&key=AIzaSyAoEnMQe4ZX1tFEinO8c3XUHt7AHO0ipEM&callback=initMap">
    </script>

    <!-- jQuery -->
    <script src="vendor/jquery/jquery.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="vendor/bootstrap/js/bootstrap.min.js"></script>
    <script src="js/lib/knockout-3.2.0.js"></script>
    <script src="js/app.js"></script>

</body>

</html>
